var Attacklab=Attacklab||{};
Attacklab.wmdBase=function(){var c=top.Attacklab,h=top.document,m=top.RegExp,u=top.navigator;c.Util={};c.Position={};c.Command={};c.Global={};var j=c.Util,s=c.Position,g=c.Command,p=c.Global;p.isIE=/msie/.test(u.userAgent.toLowerCase());p.isIE_5or6=/msie 6/.test(u.userAgent.toLowerCase())||/msie 5/.test(u.userAgent.toLowerCase());p.isIE_7plus=p.isIE&&!p.isIE_5or6;p.isOpera=/opera/.test(u.userAgent.toLowerCase());p.isKonqueror=/konqueror/.test(u.userAgent.toLowerCase());c.PanelCollection=function(){this.buttonBar=
h.getElementById("wmd-button-bar");this.preview=h.getElementById("wmd-preview");this.output=h.getElementById("wmd-output");this.input=h.getElementById("wmd-input")};c.panels=void 0;c.ieCachedRange=null;c.ieRetardedClick=!1;j.isVisible=function(a){if(window.getComputedStyle)return"none"!==window.getComputedStyle(a,null).getPropertyValue("display");if(a.currentStyle)return"none"!==a.currentStyle.display};j.addEvent=function(a,d,f){a.attachEvent?a.attachEvent("on"+d,f):a.addEventListener(d,f,!1)};j.removeEvent=
function(a,d,f){a.detachEvent?a.detachEvent("on"+d,f):a.removeEventListener(d,f,!1)};j.fixEolChars=function(a){a=a.replace(/\r\n/g,"\n");return a=a.replace(/\r/g,"\n")};j.extendRegExp=function(a,d,f){if(null===d||void 0===d)d="";if(null===f||void 0===f)f="";a=a.toString();var e="",e=a.match(/\/([gim]*)$/),e=null===e?e[0]:"";a=a.replace(/(^\/|\/[gim]*$)/g,"");return RegExp(d+a+f,e)};j.createImage=function(a){a="images/"+a;var d=h.createElement("img");d.className="wmd-button";d.src=a;return d};j.prompt=
function(a,d,f){var e,c,g;void 0===d&&(d="");var n=function(a){27===(a.charCode||a.keyCode)&&b(!0)},b=function(a){j.removeEvent(h.body,"keydown",n);var b=g.value;a?b=null:(b=b.replace("http://http://","http://"),b=b.replace("http://https://","https://"),b=b.replace("http://ftp://","ftp://"),-1===b.indexOf("http://")&&(-1===b.indexOf("ftp://")&&-1===b.indexOf("https://"))&&(b="http://"+b));e.parentNode.removeChild(e);c.parentNode.removeChild(c);f(b);return!1};c=h.createElement("div");c.className="wmd-prompt-background";
style=c.style;style.position="absolute";style.top="0";style.zIndex="1000";p.isKonqueror?style.backgroundColor="transparent":p.isIE?style.filter="alpha(opacity=50)":style.opacity="0.5";var l=s.getPageSize();style.height=l[1]+"px";p.isIE?(style.left=h.documentElement.scrollLeft,style.width=h.documentElement.clientWidth):(style.left="0",style.width="100%");h.body.appendChild(c);top.setTimeout(function(){e=h.createElement("div");e.className="wmd-prompt-dialog";e.style.padding="10px;";e.style.position=
"fixed";e.style.width="400px";e.style.zIndex="1001";var f=h.createElement("div");f.innerHTML=a;f.style.padding="5px";e.appendChild(f);f=h.createElement("form");f.onsubmit=function(){return b(!1)};style=f.style;style.padding="0";style.margin="0";style.cssFloat="left";style.width="100%";style.textAlign="center";style.position="relative";e.appendChild(f);g=h.createElement("input");g.type="text";g.value=d;style=g.style;style.display="block";style.width="80%";style.marginLeft=style.marginRight="auto";
f.appendChild(g);var c=h.createElement("input");c.type="button";c.onclick=function(){return b(!1)};c.value="OK";style=c.style;style.margin="10px";style.display="inline";style.width="7em";var k=h.createElement("input");k.type="button";k.onclick=function(){return b(!0)};k.value="Cancel";style=k.style;style.margin="10px";style.display="inline";style.width="7em";/mac/.test(u.platform.toLowerCase())?(f.appendChild(k),f.appendChild(c)):(f.appendChild(c),f.appendChild(k));j.addEvent(h.body,"keydown",n);
e.style.top="50%";e.style.left="50%";e.style.display="block";p.isIE_5or6&&(e.style.position="absolute",e.style.top=h.documentElement.scrollTop+200+"px",e.style.left="50%");h.body.appendChild(e);e.style.marginTop=-(s.getHeight(e)/2)+"px";e.style.marginLeft=-(s.getWidth(e)/2)+"px";f=d.length;void 0!==g.selectionStart?(g.selectionStart=0,g.selectionEnd=f):g.createTextRange&&(c=g.createTextRange(),c.collapse(!1),c.moveStart("character",-f),c.moveEnd("character",f),c.select());g.focus()},0)};s.getTop=
function(a,d){var f=a.offsetTop;if(!d)for(;a=a.offsetParent;)f+=a.offsetTop;return f};s.getHeight=function(a){return a.offsetHeight||a.scrollHeight};s.getWidth=function(a){return a.offsetWidth||a.scrollWidth};s.getPageSize=function(){var a,d,f,e;self.innerHeight&&self.scrollMaxY?(a=h.body.scrollWidth,d=self.innerHeight+self.scrollMaxY):h.body.scrollHeight>h.body.offsetHeight?(a=h.body.scrollWidth,d=h.body.scrollHeight):(a=h.body.offsetWidth,d=h.body.offsetHeight);self.innerHeight?(f=self.innerWidth,
e=self.innerHeight):h.documentElement&&h.documentElement.clientHeight?(f=h.documentElement.clientWidth,e=h.documentElement.clientHeight):h.body&&(f=h.body.clientWidth,e=h.body.clientHeight);a=Math.max(a,f);d=Math.max(d,e);return[a,d,f,e]};c.inputPoller=function(a,d){var f=this,e=c.panels.input,k,g,h,b;this.tick=function(){if(j.isVisible(e)){if(e.selectionStart||0===e.selectionStart){var a=e.selectionStart,b=e.selectionEnd;if(a!=k||b!=g)if(k=a,g=b,h!=e.value)return h=e.value,!0}return!1}};this.destroy=
function(){top.clearInterval(b)};b=top.setInterval(function(){j.isVisible(e)&&f.tick()&&a()},d)};c.undoManager=function(a){var d=this,f=[],e=0,k="none",g,h,b,l,r=function(a,f){k!=a&&(k=a,f||v());!p.isIE||"moving"!=k?b=top.setTimeout(q,1):l=null},q=function(){l=new c.TextareaState;h.tick();b=void 0};this.setCommandMode=function(){k="command";v();b=top.setTimeout(q,0)};this.canUndo=function(){return 1<e};this.canRedo=function(){return f[e+1]?!0:!1};this.undo=function(){d.canUndo()&&(g?(g.restore(),
g=null):(f[e]=new c.TextareaState,f[--e].restore(),a&&a()));k="none";c.panels.input.focus();q()};this.redo=function(){d.canRedo()&&(f[++e].restore(),a&&a());k="none";c.panels.input.focus();q()};var v=function(){var b=l||new c.TextareaState;if(!b)return!1;"moving"==k?g||(g=b):(g&&(f[e-1].text!=g.text&&(f[e++]=g),g=null),f[e++]=b,f[e+1]=null,a&&a())};this.destroy=function(){h&&h.destroy()};j.addEvent(c.panels.input,"keypress",function(a){(a.ctrlKey||a.metaKey)&&(89==a.keyCode||90==a.keyCode)&&a.preventDefault()});
var t=function(){if((p.isIE||l&&l.text!=c.panels.input.value)&&void 0==b)k="paste",v(),q()};h=new c.inputPoller(t,100);j.addEvent(c.panels.input,"keydown",function(a){var b=!1;if(a.ctrlKey||a.metaKey)switch(String.fromCharCode(a.charCode||a.keyCode)){case "y":d.redo();b=!0;break;case "z":a.shiftKey?d.redo():d.undo(),b=!0}b&&(a.preventDefault&&a.preventDefault(),top.event&&(top.event.returnValue=!1))});j.addEvent(c.panels.input,"keydown",function(a){!a.ctrlKey&&!a.metaKey&&(a=a.keyCode,33<=a&&40>=
a||63232<=a&&63235>=a?r("moving"):8==a||46==a||127==a?r("deleting"):13==a?r("newlines"):27==a?r("escape"):(16>a||20<a)&&91!=a&&r("typing"))});j.addEvent(c.panels.input,"mousedown",function(){r("moving")});c.panels.input.onpaste=t;c.panels.input.ondrop=t;q();v()};c.editor=function(a){a||(a=function(){});var d=c.panels.input,f=this,e,k=function(b){d.focus();if(b.textOp){e&&e.setCommandMode();var k=new c.TextareaState;if(!k)return;var g=k.getChunks(),h=function(){d.focus();g&&k.setChunks(g);k.restore();
a()};b.textOp(g,h,!0)||h()}b.execute&&b.execute(f)},w=function(){e&&(n(document.getElementById("wmd-undo-button"),e.canUndo()),n(document.getElementById("wmd-redo-button"),e.canRedo()))},n=function(a,b){b?(a.style.backgroundPosition=a.XShift+" 0px",a.onmouseover=function(){this.style.backgroundPosition=this.XShift+" -40px"},a.onmouseout=function(){this.style.backgroundPosition=this.XShift+" 0px"},p.isIE&&(a.onmousedown=function(){c.ieRetardedClick=!0;c.ieCachedRange=document.selection.createRange()}),
a.isHelp||(a.onclick=function(){if(this.onmouseout)this.onmouseout();k(this);return!1})):(a.style.backgroundPosition=a.XShift+" -20px",a.onmouseover=a.onmouseout=a.onclick=function(){})};this.undo=function(){e&&e.undo()};this.redo=function(){e&&e.redo()};this.destroy=function(){e&&e.destroy();(void 0).parentNode&&(void 0).parentNode.removeChild(void 0);d&&(d.style.marginTop="");top.clearInterval(void 0)};/\?noundo/.test(h.location.href)&&(c.nativeUndo=!0);c.nativeUndo||(e=new c.undoManager(function(){a();
w()}));var b=document.getElementById("wmd-button-bar"),l=document.createElement("ul");l.id="wmd-button-row";l=b.appendChild(l);b=document.createElement("li");b.className="wmd-button";b.id="wmd-bold-button";b.title="Strong <strong> Ctrl+B";b.XShift="0px";b.textOp=g.doBold;n(b,!0);l.appendChild(b);b=document.createElement("li");b.className="wmd-button";b.id="wmd-italic-button";b.title="Emphasis <em> Ctrl+I";b.XShift="-20px";b.textOp=g.doItalic;n(b,!0);l.appendChild(b);b=document.createElement("li");
b.className="wmd-spacer";b.id="wmd-spacer1";l.appendChild(b);b=document.createElement("li");b.className="wmd-button";b.id="wmd-link-button";b.title="Hyperlink <a> Ctrl+L";b.XShift="-40px";b.textOp=function(a,b){return g.doLinkOrImage(a,b,!1)};n(b,!0);l.appendChild(b);b=document.createElement("li");b.className="wmd-button";b.id="wmd-quote-button";b.title="Blockquote <blockquote> Ctrl+Q";b.XShift="-60px";b.textOp=g.doBlockquote;n(b,!0);l.appendChild(b);b=document.createElement("li");b.className="wmd-button";
b.id="wmd-code-button";b.title="Code Sample <pre><code> Ctrl+K";b.XShift="-80px";b.textOp=g.doCode;n(b,!0);l.appendChild(b);b=document.createElement("li");b.className="wmd-button";b.id="wmd-image-button";b.title="Image <img> Ctrl+G";b.XShift="-100px";b.textOp=function(a,b){return g.doLinkOrImage(a,b,!0)};n(b,!0);l.appendChild(b);b=document.createElement("li");b.className="wmd-spacer";b.id="wmd-spacer2";l.appendChild(b);b=document.createElement("li");b.className="wmd-button";b.id="wmd-olist-button";
b.title="Numbered List <ol> Ctrl+O";b.XShift="-120px";b.textOp=function(a,b,f){g.doList(a,b,!0,f)};n(b,!0);l.appendChild(b);b=document.createElement("li");b.className="wmd-button";b.id="wmd-ulist-button";b.title="Bulleted List <ul> Ctrl+U";b.XShift="-140px";b.textOp=function(a,b,f){g.doList(a,b,!1,f)};n(b,!0);l.appendChild(b);b=document.createElement("li");b.className="wmd-button";b.id="wmd-heading-button";b.title="Heading <h1>/<h2> Ctrl+H";b.XShift="-160px";b.textOp=g.doHeading;n(b,!0);l.appendChild(b);
b=document.createElement("li");b.className="wmd-button";b.id="wmd-hr-button";b.title="Horizontal Rule <hr> Ctrl+R";b.XShift="-180px";b.textOp=g.doHorizontalRule;n(b,!0);l.appendChild(b);b=document.createElement("li");b.className="wmd-spacer";b.id="wmd-spacer3";l.appendChild(b);b=document.createElement("li");b.className="wmd-button";b.id="wmd-undo-button";b.title="Undo - Ctrl+Z";b.XShift="-200px";b.execute=function(a){a.undo()};n(b,!0);l.appendChild(b);b=document.createElement("li");b.className="wmd-button";
b.id="wmd-redo-button";b.title="Redo - Ctrl+Y";b.title=/win/.test(u.platform.toLowerCase())?"Redo - Ctrl+Y":"Redo - Ctrl+Shift+Z";b.XShift="-220px";b.execute=function(a){a.redo()};n(b,!0);l.appendChild(b);b=document.createElement("li");b.className="wmd-button";b.id="wmd-help-button";b.XShift="-240px";b.isHelp=!0;var r=document.createElement("a");r.href="http://wmd-editor.com/";r.target="_blank";r.title="WMD website";b.appendChild(r);n(b,!0);l.appendChild(b);w();l="keydown";p.isOpera&&(l="keypress");
j.addEvent(d,l,function(a){if(a.ctrlKey||a.metaKey){switch(String.fromCharCode(a.charCode||a.keyCode).toLowerCase()){case "b":k(document.getElementById("wmd-bold-button"));break;case "i":k(document.getElementById("wmd-italic-button"));break;case "l":k(document.getElementById("wmd-link-button"));break;case "q":k(document.getElementById("wmd-quote-button"));break;case "k":k(document.getElementById("wmd-code-button"));break;case "g":k(document.getElementById("wmd-image-button"));break;case "o":k(document.getElementById("wmd-olist-button"));
break;case "u":k(document.getElementById("wmd-ulist-button"));break;case "h":k(document.getElementById("wmd-heading-button"));break;case "r":k(document.getElementById("wmd-hr-button"));break;case "y":k(document.getElementById("wmd-redo-button"));break;case "z":a.shiftKey?k(document.getElementById("wmd-redo-button")):k(document.getElementById("wmd-undo-button"));break;default:return}a.preventDefault&&a.preventDefault();top.event&&(top.event.returnValue=!1)}});j.addEvent(d,"keyup",function(a){if(!a.shiftKey&&
(!a.ctrlKey&&!a.metaKey)&&13===(a.charCode||a.keyCode))fakeButton={},fakeButton.textOp=g.doAutoindent,k(fakeButton)});p.isIE&&j.addEvent(d,"keydown",function(a){if(27===a.keyCode)return!1});if(d.form){var q=d.form.onsubmit;d.form.onsubmit=function(){if(q)return q.apply(this,arguments)}}};c.TextareaState=function(){var a=this,d=c.panels.input;this.init=function(){if(j.isVisible(d)&&(this.setInputAreaSelectionStartEnd(),this.scrollTop=d.scrollTop,!this.text&&d.selectionStart||0===d.selectionStart))this.text=
d.value};this.setInputAreaSelection=function(){if(j.isVisible(d))if(void 0!==d.selectionStart&&!p.isOpera)d.focus(),d.selectionStart=a.start,d.selectionEnd=a.end,d.scrollTop=a.scrollTop;else if(h.selection&&!(h.activeElement&&h.activeElement!==d)){d.focus();var f=d.createTextRange();f.moveStart("character",-d.value.length);f.moveEnd("character",-d.value.length);f.moveEnd("character",a.end);f.moveStart("character",a.start);f.select()}};this.setInputAreaSelectionStartEnd=function(){if(d.selectionStart||
0===d.selectionStart)a.start=d.selectionStart,a.end=d.selectionEnd;else if(h.selection){a.text=j.fixEolChars(d.value);var f;c.ieRetardedClick&&c.ieCachedRange?(f=c.ieCachedRange,c.ieRetardedClick=!1):f=h.selection.createRange();var e=j.fixEolChars(f.text),k="\u0007"+e+"\u0007";f.text=k;var g=j.fixEolChars(d.value);f.moveStart("character",-k.length);f.text=e;a.start=g.indexOf("\u0007");a.end=g.lastIndexOf("\u0007")-1;if(k=a.text.length-j.fixEolChars(d.value).length){for(f.moveStart("character",-e.length);k--;)e+=
"\n",a.end+=1;f.text=e}this.setInputAreaSelection()}};this.restore=function(){void 0!=a.text&&a.text!=d.value&&(d.value=a.text);this.setInputAreaSelection();d.scrollTop=a.scrollTop};this.getChunks=function(){var f=new c.Chunks;f.before=j.fixEolChars(a.text.substring(0,a.start));f.startTag="";f.selection=j.fixEolChars(a.text.substring(a.start,a.end));f.endTag="";f.after=j.fixEolChars(a.text.substring(a.end));f.scrollTop=a.scrollTop;return f};this.setChunks=function(a){a.before+=a.startTag;a.after=
a.endTag+a.after;p.isOpera&&(a.before=a.before.replace(/\n/g,"\r\n"),a.selection=a.selection.replace(/\n/g,"\r\n"),a.after=a.after.replace(/\n/g,"\r\n"));this.start=a.before.length;this.end=a.before.length+a.selection.length;this.text=a.before+a.selection+a.after;this.scrollTop=a.scrollTop};this.init()};c.Chunks=function(){};c.Chunks.prototype.findTags=function(a,d){var f=this,e;a&&(e=j.extendRegExp(a,"","$"),this.before=this.before.replace(e,function(a){f.startTag+=a;return""}),e=j.extendRegExp(a,
"^",""),this.selection=this.selection.replace(e,function(a){f.startTag+=a;return""}));d&&(e=j.extendRegExp(d,"","$"),this.selection=this.selection.replace(e,function(a){f.endTag=a+f.endTag;return""}),e=j.extendRegExp(d,"^",""),this.after=this.after.replace(e,function(a){f.endTag=a+f.endTag;return""}))};c.Chunks.prototype.trimWhitespace=function(a){this.selection=this.selection.replace(/^(\s*)/,"");a||(this.before+=m.$1);this.selection=this.selection.replace(/(\s*)$/,"");a||(this.after=m.$1+this.after)};
c.Chunks.prototype.addBlankLines=function(a,d,f){void 0===a&&(a=1);void 0===d&&(d=1);a++;d++;var e,c;this.selection=this.selection.replace(/(^\n*)/,"");this.startTag+=m.$1;this.selection=this.selection.replace(/(\n*$)/,"");this.endTag+=m.$1;this.startTag=this.startTag.replace(/(^\n*)/,"");this.before+=m.$1;this.endTag=this.endTag.replace(/(\n*$)/,"");this.after+=m.$1;if(this.before){for(e=c="";a--;)e+="\\n?",c+="\n";f&&(e="\\n*");this.before=this.before.replace(new m(e+"$",""),c)}if(this.after){for(e=
c="";d--;)e+="\\n?",c+="\n";f&&(e="\\n*");this.after=this.after.replace(new m(e,""),c)}};g.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)";g.unwrap=function(a){var d=new m("([^\\n])\\n(?!(\\n|"+g.prefixes+"))","g");a.selection=a.selection.replace(d,"$1 $2")};g.wrap=function(a,d){g.unwrap(a);var c=new m("(.{1,"+d+"})( +|$\\n?)","gm");a.selection=a.selection.replace(c,function(a,d){return(new m("^"+g.prefixes,"")).test(a)?a:d+"\n"});a.selection=a.selection.replace(/\s+$/,
"")};g.doBold=function(a){return g.doBorI(a,2,"strong text")};g.doItalic=function(a){return g.doBorI(a,1,"emphasized text")};g.doBorI=function(a,d,c){a.trimWhitespace();a.selection=a.selection.replace(/\n{2,}/g,"\n");a.before.search(/(\**$)/);var e=m.$1;a.after.search(/(^\**)/);var g=m.$1,e=Math.min(e.length,g.length);e>=d&&(2!=e||1!=d)?(a.before=a.before.replace(m("[*]{"+d+"}$",""),""),a.after=a.after.replace(m("^[*]{"+d+"}",""),"")):!a.selection&&g?(a.after=a.after.replace(/^([*_]*)/,""),a.before=
a.before.replace(/(\s?)$/,""),a.before=a.before+g+m.$1):(!a.selection&&!g&&(a.selection=c),d=1>=d?"*":"**",a.before+=d,a.after=d+a.after)};g.stripLinkDefs=function(a,d){return a=a.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(a,c,g,h,j){d[c]=a.replace(/\s*$/,"");return h?(d[c]=a.replace(/["(](.+?)[")]$/,""),h+j):""})};g.addLinkDef=function(a,d){var c=0,e={};a.before=g.stripLinkDefs(a.before,e);a.selection=g.stripLinkDefs(a.selection,
e);a.after=g.stripLinkDefs(a.after,e);var k="",h=/(\[(?:\[[^\]]*\]|[^\[\]])*\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,j=function(a){c++;a=a.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+c+"]:");k+="\n"+a},b=function(a,b,d,g){return e[d]?(j(e[d]),b+c+g):a};a.before=a.before.replace(h,b);d?j(d):a.selection=a.selection.replace(h,b);var l=c;a.after=a.after.replace(h,b);a.after&&(a.after=a.after.replace(/\n*$/,""));a.after||(a.selection=a.selection.replace(/\n*$/,""));a.after+="\n\n"+k;return l};g.doLinkOrImage=function(a,
d,c){a.trimWhitespace();a.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);if(1<a.endTag.length)a.startTag=a.startTag.replace(/!?\[/,""),a.endTag="",g.addLinkDef(a,null);else if(/\n\n/.test(a.selection))g.addLinkDef(a,null);else{var e=function(e){null!==e&&(a.startTag=a.endTag="",e=g.addLinkDef(a," [999]: "+e),a.startTag=c?"![":"[",a.endTag="]["+e+"]",a.selection||(a.selection=c?"alt text":"link text"));d()};c?j.prompt("<p style='margin-top: 0px'><b>Enter the image URL.</b></p><p>You can also add a title, which will be displayed as a tool tip.</p><p>Example:<br />http://wmd-editor.com/images/cloud1.jpg   \"Optional title\"</p>",
"http://",e):j.prompt("<p style='margin-top: 0px'><b>Enter the web address.</b></p><p>You can also add a title, which will be displayed as a tool tip.</p><p>Example:<br />http://wmd-editor.com/   \"Optional title\"</p>","http://",e);return!0}};j.makeAPI=function(){c.wmd={};c.wmd.editor=c.editor;c.wmd.previewManager=c.previewManager};j.startEditor=function(){if(!1===c.wmd_env.autostart)j.makeAPI();else{var a;j.addEvent(top,"load",function(){c.panels=new c.PanelCollection;a=new c.previewManager;new c.editor(a.refresh);
a.refresh(!0)})}};c.previewManager=function(){var a=this,d,f,e,g,m,n,b="delayed",l=function(){var a=0;top.innerHeight?a=top.pageYOffset:h.documentElement&&h.documentElement.scrollTop?a=h.documentElement.scrollTop:h.body&&(a=h.body.scrollTop);return a},r=function(){if(c.panels.preview||c.panels.output){var a=c.panels.input.value;if(!(a&&a==m)){m=a;var b=(new Date).getTime();!d&&c.showdown&&(d=new c.showdown.converter);d&&(a=d.makeHtml(a));g=(new Date).getTime()-b;var b=a,e=s.getTop(c.panels.input)-
l();if(c.panels.output)if(void 0!==c.panels.output.value)c.panels.output.value=b,c.panels.output.readOnly=!0;else{var f=b.replace(/&/g,"&amp;"),f=f.replace(/</g,"&lt;");c.panels.output.innerHTML="<pre><code>"+f+"</code></pre>"}c.panels.preview&&(c.panels.preview.innerHTML=b);c.panels.preview&&(c.panels.preview.scrollTop=(c.panels.preview.scrollHeight-c.panels.preview.clientHeight)*(c.panels.preview.scrollHeight<=c.panels.preview.clientHeight?1:c.panels.preview.scrollTop/(c.panels.preview.scrollHeight-
c.panels.preview.clientHeight)));c.panels.output&&(c.panels.output.scrollTop=(c.panels.output.scrollHeight-c.panels.output.clientHeight)*(c.panels.output.scrollHeight<=c.panels.output.clientHeight?1:c.panels.output.scrollTop/(c.panels.output.scrollHeight-c.panels.output.clientHeight)));if(v)v=!1;else{var h=s.getTop(c.panels.input)-l();p.isIE?top.setTimeout(function(){top.scrollBy(0,h-e)},0):top.scrollBy(0,h-e)}n=a}}},q=function(){e&&(top.clearTimeout(e),e=void 0);if("manual"!==b){var a=0;"delayed"===
b&&(a=g);3E3<a&&(a=3E3);e=top.setTimeout(r,a)}};this.refresh=function(a){a?(m="",r()):q()};this.processingTime=function(){return g};this.output=function(){return n};this.setUpdateMode=function(c){b=c;a.refresh()};var v=!0;this.destroy=function(){f&&f.destroy()};var t=c.panels.input;j.addEvent(t,"input",q);t.onpaste=q;t.ondrop=q;j.addEvent(t,"keypress",q);j.addEvent(t,"keydown",q);f=new c.inputPoller(q,500);r();c.panels.preview&&(c.panels.preview.scrollTop=0);c.panels.output&&(c.panels.output.scrollTop=
0)};g.doAutoindent=function(a,c,f){a.before=a.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n");a.before=a.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n");a.before=a.before.replace(/(\n|^)[ \t]+\n$/,"\n\n");f=!1;/(\n|^)[ ]{0,3}([*+-])[ \t]+.*\n$/.test(a.before)&&g.doList&&g.doList(a,c,!1,!0);/(\n|^)[ ]{0,3}(\d+[.])[ \t]+.*\n$/.test(a.before)&&g.doList&&g.doList(a,c,!0,!0);/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(a.before)&&g.doBlockquote&&g.doBlockquote(a,c,f);/(\n|^)(\t|[ ]{4,}).*\n$/.test(a.before)&&
g.doCode&&g.doCode(a,c,f)};g.doBlockquote=function(a,d,f){a.selection=a.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(c,d,f,g){a.before+=d;a.after=g+a.after;return f});a.before=a.before.replace(/(>[ \t]*)$/,function(c,d){a.selection=d+a.selection;return""});d=f?"Blockquote":"";a.selection=a.selection.replace(/^(\s|>)+$/,"");a.selection=a.selection||d;a.before&&(a.before=a.before.replace(/\n?$/,"\n"));a.after&&(a.after=a.after.replace(/^\n?/,"\n"));a.before=a.before.replace(/(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*$)/,
function(c){a.startTag=c;return""});a.after=a.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(c){a.endTag=c;return""});d=function(c){var d=c?"> ":"";a.startTag&&(a.startTag=a.startTag.replace(/\n((>|\s)*)\n$/,function(a,c){return"\n"+c.replace(/^[ ]{0,3}>?[ \t]*$/gm,d)+"\n"}));a.endTag&&(a.endTag=a.endTag.replace(/^\n((>|\s)*)\n/,function(a,c){return"\n"+c.replace(/^[ ]{0,3}>?[ \t]*$/gm,d)+"\n"}))};/^(?![ ]{0,3}>)/m.test(a.selection)?(g.wrap(a,c.wmd_env.lineLength-2),a.selection=
a.selection.replace(/^/gm,"> "),d(!0),a.addBlankLines()):(a.selection=a.selection.replace(/^[ ]{0,3}> ?/gm,""),g.unwrap(a),d(!1),!/^(\n|^)[ ]{0,3}>/.test(a.selection)&&a.startTag&&(a.startTag=a.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(a.selection)&&a.endTag&&(a.endTag=a.endTag.replace(/^\n{0,2}/,"\n\n")));/\n/.test(a.selection)||(a.selection=a.selection.replace(/^(> *)/,function(c,d){a.startTag+=d;return""}))};g.doCode=function(a,c,f){c=/\S[ ]*$/.test(a.before);if(!/^[ ]*\S/.test(a.after)&&
!c||/\n/.test(a.selection)){a.before=a.before.replace(/[ ]{4}$/,function(c){a.selection=c+a.selection;return""});var e=c=1;if(/\n(\t|[ ]{4,}).*\n$/.test(a.before)||""===a.after)c=0;/^\n(\t|[ ]{4,})/.test(a.after)&&(e=0);a.addBlankLines(c,e);a.selection?a.selection=/^[ ]{0,3}\S/m.test(a.selection)?a.selection.replace(/^/gm,"    "):a.selection.replace(/^[ ]{4}/gm,""):(a.startTag="    ",a.selection=f?"enter code here":"")}else a.trimWhitespace(),a.findTags(/`/,/`/),!a.startTag&&!a.endTag?(a.startTag=
a.endTag="`",a.selection||(a.selection=f?"enter code here":"")):a.endTag&&!a.startTag?(a.before+=a.endTag,a.endTag=""):a.startTag=a.endTag=""};g.doList=function(a,d,f,e){d=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/;var h="-",j=1,n=function(){var a;f?(a=" "+j+". ",j++):a=" "+h+" ";return a},b=function(a){void 0===f&&(f=/^\s*\d/.test(a));return a=a.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(){return n()})};a.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,
null);a.before&&(!/\n$/.test(a.before)&&!/^\n/.test(a.startTag))&&(a.before+=a.startTag,a.startTag="");if(a.startTag){var l=/\d+[.]/.test(a.startTag);a.startTag="";a.selection=a.selection.replace(/\n[ ]{4}/g,"\n");g.unwrap(a);a.addBlankLines();l&&(a.after=a.after.replace(d,b));if(f==l)return}var p=1;a.before=a.before.replace(/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,function(a){/^\s*([*+-])/.test(a)&&(h=m.$1);p=/[^\n]\n\n[^\n]/.test(a)?1:
0;return b(a)});a.selection||(a.selection=e?"List item":" ");e=n();var q=1;a.after=a.after.replace(d,function(a){q=/[^\n]\n\n[^\n]/.test(a)?1:0;return b(a)});a.trimWhitespace(!0);a.addBlankLines(p,q,!0);a.startTag=e;e=e.replace(/./g," ");g.wrap(a,c.wmd_env.lineLength-e.length);a.selection=a.selection.replace(/\n/g,"\n"+e)};g.doHeading=function(a){a.selection=a.selection.replace(/\s+/g," ");a.selection=a.selection.replace(/(^\s+|\s+$)/g,"");if(a.selection){var d=0;a.findTags(/#+[ ]*/,/[ ]*#+/);/#+/.test(a.startTag)&&
(d=m.lastMatch.length);a.startTag=a.endTag="";a.findTags(null,/\s?(-+|=+)/);/=+/.test(a.endTag)&&(d=1);/-+/.test(a.endTag)&&(d=2);a.startTag=a.endTag="";a.addBlankLines(1,1);d=0==d?2:d-1;if(0<d){var d=2<=d?"-":"=",f=a.selection.length;f>c.wmd_env.lineLength&&(f=c.wmd_env.lineLength);for(a.endTag="\n";f--;)a.endTag+=d}}else a.startTag="## ",a.selection="Heading",a.endTag=" ##"};g.doHorizontalRule=function(a){a.startTag="----------\n";a.selection="";a.addBlankLines(2,1,!0)}};Attacklab.wmd_env={};
Attacklab.account_options={};Attacklab.wmd_defaults={version:1,output:"HTML",lineLength:40,delayLoad:!1};
Attacklab.wmd||(Attacklab.wmd=function(){Attacklab.loadEnv=function(){var c=function(c){if(c)for(var m in c)Attacklab.wmd_env[m]=c[m]};c(Attacklab.wmd_defaults);c(Attacklab.account_options);c(top.wmd_options);Attacklab.full=!0;Attacklab.wmd_env.buttons=Attacklab.wmd_env.buttons||"bold italic link blockquote code image ol ul heading hr"};Attacklab.loadEnv()},Attacklab.wmd(),Attacklab.wmdBase(),Attacklab.Util.startEditor());
